- task: NodeTool@0
      inputs:
        versionSpec: '18.x' # Specify the Node.js version
        checkLatest: true
      displayName: 'Install Dependencies'
      

    - script: |
        npm audit fix --force
        npm i sharp 
        npm config set fund false --location=global
        set cache .npm
        npm install
      displayName: 'Install Node.js'
      workingDirectory: $(System.DefaultWorkingDirectory)/api
      
    - script: |
       npm audit fix --force
       npm ci test
      displayName: 'Run Unit Tests'
      workingDirectory: $(System.DefaultWorkingDirectory)/tests
    
    - script: |
        npm publish
      displayName:  'publish apps'
      workingDirectory: $(System.DefaultWorkingDirectory)/client
    
    - task: PublishBuildArtifacts@1
      displayName: publish Artifacts
      inputs:
        PathtoPublish: '$(Build.ArtifacStagingDirectory'
        ArtifactName: drop
        publishLocation: Container
